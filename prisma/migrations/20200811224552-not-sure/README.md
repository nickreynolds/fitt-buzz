# Migration `20200811224552-not-sure`

This migration has been generated by Nick Reynolds at 8/11/2020, 10:45:52 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."RoutineRevision" ADD COLUMN "createdById" integer  NOT NULL ;

ALTER TABLE "public"."Set" ADD COLUMN "createdById" integer  NOT NULL ;

ALTER TABLE "public"."SetGroup" ADD COLUMN "createdById" integer  NOT NULL ;

ALTER TABLE "public"."RoutineRevision" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Set" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."SetGroup" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200811192250-rename-routine..20200811224552-not-sure
--- datamodel.dml
+++ datamodel.dml
@@ -1,8 +1,8 @@
 // 1
 datasource db {
     provider = "postgresql"
-    url = "***"
+    url = "***"
 }
 // 2
 generator client {
@@ -26,15 +26,19 @@
     id          Int        @id @default(autoincrement())
     exercise    Exercise   @relation(fields: [exerciseId], references: [id])
     restSeconds Int
     exerciseId  Int
+    createdBy   User       @relation(fields: [createdById], references: [id])
     setGroups   SetGroup[]
+    createdById Int
 }
 model SetGroup {
     id               Int               @id @default(autoincrement())
     sets             Set[]
     routineRevisions RoutineRevision[]
+    createdBy        User              @relation(fields: [createdById], references: [id])
+    createdById      Int
 }
 model RoutineRevision {
     id          Int        @id @default(autoincrement())
@@ -42,8 +46,10 @@
     routineBlob String
     setGroups   SetGroup[]
     routine     Routine?   @relation(fields: [routineId], references: [id])
     routineId   Int?
+    createdBy   User       @relation(fields: [createdById], references: [id])
+    createdById Int
 }
 model Routine {
     id          Int               @id @default(autoincrement())
@@ -56,10 +62,13 @@
     revisions   RoutineRevision[]
 }
 model User {
-    id        Int        @id @default(autoincrement())
-    username  String     @unique
-    password  String
-    routines  Routine[]
-    exercises Exercise[]
+    id              Int               @id @default(autoincrement())
+    username        String            @unique
+    password        String
+    routines        Routine[]
+    exercises       Exercise[]
+    Set             Set[]
+    SetGroup        SetGroup[]
+    RoutineRevision RoutineRevision[]
 }
```


