# Migration `20200816205213-try-implicit-again`

This migration has been generated by Nick Reynolds at 8/16/2020, 4:52:13 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Exercise" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"createdById" text   ,
"description" text  NOT NULL ,
"formatId" text  NOT NULL ,
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Format" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"description" text  NOT NULL ,
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Measurable" (
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Muscle" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"description" text  NOT NULL ,
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."MuscleImpact" (
"id" text  NOT NULL ,
"impactRating" integer  NOT NULL ,
"muscleId" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."User" (
"id" text  NOT NULL ,
"password" text  NOT NULL ,
"username" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."_ExerciseToMuscleImpact" (
"A" text  NOT NULL ,
"B" text  NOT NULL )

CREATE TABLE "public"."_FormatToMeasurable" (
"A" text  NOT NULL ,
"B" text  NOT NULL )

CREATE UNIQUE INDEX "User.username_unique" ON "public"."User"("username")

CREATE UNIQUE INDEX "_ExerciseToMuscleImpact_AB_unique" ON "public"."_ExerciseToMuscleImpact"("A","B")

CREATE  INDEX "_ExerciseToMuscleImpact_B_index" ON "public"."_ExerciseToMuscleImpact"("B")

CREATE UNIQUE INDEX "_FormatToMeasurable_AB_unique" ON "public"."_FormatToMeasurable"("A","B")

CREATE  INDEX "_FormatToMeasurable_B_index" ON "public"."_FormatToMeasurable"("B")

ALTER TABLE "public"."Exercise" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Exercise" ADD FOREIGN KEY ("formatId")REFERENCES "public"."Format"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."MuscleImpact" ADD FOREIGN KEY ("muscleId")REFERENCES "public"."Muscle"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ExerciseToMuscleImpact" ADD FOREIGN KEY ("A")REFERENCES "public"."Exercise"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ExerciseToMuscleImpact" ADD FOREIGN KEY ("B")REFERENCES "public"."MuscleImpact"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_FormatToMeasurable" ADD FOREIGN KEY ("A")REFERENCES "public"."Format"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_FormatToMeasurable" ADD FOREIGN KEY ("B")REFERENCES "public"."Measurable"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200816202915-question-mark..20200816205213-try-implicit-again
--- datamodel.dml
+++ datamodel.dml
@@ -4,9 +4,9 @@
 ///
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Exercise {
   createdAt     DateTime       @default(now())
@@ -20,30 +20,22 @@
   muscleImpacts MuscleImpact[]
 }
 model Format {
-  createdAt   DateTime               @default(now())
+  createdAt   DateTime     @default(now())
   description String
-  id          String                 @id
+  id          String       @id
   name        String
   exercises   Exercise[]
-  measurables MeasurablesOnFormats[]
+  measurables Measurable[]
 }
 model Measurable {
-  id      String                 @id
+  id      String   @id
   name    String
-  formats MeasurablesOnFormats[]
+  formats Format[]
 }
-model MeasurablesOnFormats {
-  format       Format     @relation(fields: [formatId], references: [id])
-  formatId     String
-  measurable   Measurable @relation(fields: [measurableId], references: [id])
-  measurableId String
-  @@id([formatId, measurableId])
-}
-
 model Muscle {
   createdAt     DateTime       @default(now())
   description   String
   id            String         @id
```


