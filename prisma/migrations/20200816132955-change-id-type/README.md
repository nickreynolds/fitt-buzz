# Migration `20200816132955-change-id-type`

This migration has been generated by Nick Reynolds at 8/16/2020, 1:29:55 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP TABLE "public"."Exercise";

DROP TABLE "public"."Format";

DROP TABLE "public"."Measurable";

DROP TABLE "public"."Muscle";

DROP TABLE "public"."MuscleImpact";

DROP TABLE "public"."Routine";

DROP TABLE "public"."RoutineRevision";

DROP TABLE "public"."Set";

DROP TABLE "public"."SetGroup";

DROP TABLE "public"."User";

DROP TABLE "public"."_RoutineRevisionToSetGroup";

DROP TABLE "public"."_SetToSetGroup";

CREATE TABLE "public"."Muscle" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"description" text  NOT NULL ,"id" text  NOT NULL ,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."MuscleImpact" (
"exerciseId" text   ,"id" text  NOT NULL ,"impactRating" integer  NOT NULL ,"muscleId" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Measurable" (
"exerciseId" text   ,"id" text  NOT NULL ,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Format" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"description" text  NOT NULL ,"id" text  NOT NULL ,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Exercise" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"createdById" text  NOT NULL ,"description" text  NOT NULL ,"formatId" text  NOT NULL ,"id" text  NOT NULL ,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Set" (
"createdById" text  NOT NULL ,"exerciseId" text  NOT NULL ,"id" text  NOT NULL ,"restSeconds" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."SetGroup" (
"createdById" text  NOT NULL ,"id" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."RoutineRevision" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"createdById" text  NOT NULL ,"id" text  NOT NULL ,"routineBlob" text  NOT NULL ,"routineId" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Routine" (
"color" text  NOT NULL ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"createdById" text  NOT NULL ,"description" text  NOT NULL ,"id" text  NOT NULL ,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."User" (
"id" text  NOT NULL ,"password" text  NOT NULL ,"username" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."_SetToSetGroup" (
"A" text  NOT NULL ,"B" text  NOT NULL )

CREATE TABLE "public"."_RoutineRevisionToSetGroup" (
"A" text  NOT NULL ,"B" text  NOT NULL )

CREATE UNIQUE INDEX "User.username" ON "public"."User"("username")

CREATE UNIQUE INDEX "_SetToSetGroup_AB_unique" ON "public"."_SetToSetGroup"("A","B")

CREATE  INDEX "_SetToSetGroup_B_index" ON "public"."_SetToSetGroup"("B")

CREATE UNIQUE INDEX "_RoutineRevisionToSetGroup_AB_unique" ON "public"."_RoutineRevisionToSetGroup"("A","B")

CREATE  INDEX "_RoutineRevisionToSetGroup_B_index" ON "public"."_RoutineRevisionToSetGroup"("B")

ALTER TABLE "public"."MuscleImpact" ADD FOREIGN KEY ("muscleId")REFERENCES "public"."Muscle"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."MuscleImpact" ADD FOREIGN KEY ("exerciseId")REFERENCES "public"."Exercise"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Measurable" ADD FOREIGN KEY ("exerciseId")REFERENCES "public"."Exercise"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Exercise" ADD FOREIGN KEY ("formatId")REFERENCES "public"."Format"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Exercise" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Set" ADD FOREIGN KEY ("exerciseId")REFERENCES "public"."Exercise"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Set" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."SetGroup" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."RoutineRevision" ADD FOREIGN KEY ("routineId")REFERENCES "public"."Routine"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."RoutineRevision" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Routine" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_SetToSetGroup" ADD FOREIGN KEY ("A")REFERENCES "public"."Set"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_SetToSetGroup" ADD FOREIGN KEY ("B")REFERENCES "public"."SetGroup"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_RoutineRevisionToSetGroup" ADD FOREIGN KEY ("A")REFERENCES "public"."RoutineRevision"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_RoutineRevisionToSetGroup" ADD FOREIGN KEY ("B")REFERENCES "public"."SetGroup"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200816132724-remove-defaults..20200816132955-change-id-type
--- datamodel.dml
+++ datamodel.dml
@@ -1,8 +1,8 @@
 // 1
 datasource db {
     provider = "postgresql"
-    url = "***"
+    url = "***"
 }
 // 2
 generator client {
@@ -11,95 +11,95 @@
 // 3
 model Muscle {
-    id           Int            @id
+    id           String         @id
     createdAt    DateTime       @default(now())
     name         String
     description  String
     MuscleImpact MuscleImpact[]
 }
 model MuscleImpact {
-    id           Int       @id
+    id           String    @id
     muscle       Muscle    @relation(fields: [muscleId], references: [id])
     impactRating Int
-    muscleId     Int
+    muscleId     String
     Exercise     Exercise? @relation(fields: [exerciseId], references: [id])
-    exerciseId   Int?
+    exerciseId   String?
 }
 model Measurable {
-    id         Int       @id
+    id         String    @id
     name       String
     Exercise   Exercise? @relation(fields: [exerciseId], references: [id])
-    exerciseId Int?
+    exerciseId String?
 }
 model Format {
-    id          Int        @id
+    id          String     @id
     createdAt   DateTime   @default(now())
     name        String
     description String
     Exercise    Exercise[]
 }
 model Exercise {
-    id            Int            @id
+    id            String         @id
     createdAt     DateTime       @default(now())
     name          String
     description   String
     format        Format         @relation(fields: [formatId], references: [id])
     muscleImpacts MuscleImpact[]
     createdBy     User           @relation(fields: [createdById], references: [id])
-    createdById   Int
+    createdById   String
     sets          Set[]
-    formatId      Int
+    formatId      String
     measurables   Measurable[]
 }
 model Set {
-    id          Int        @id
+    id          String     @id
     exercise    Exercise   @relation(fields: [exerciseId], references: [id])
     restSeconds Int
-    exerciseId  Int
+    exerciseId  String
     createdBy   User       @relation(fields: [createdById], references: [id])
     setGroups   SetGroup[]
-    createdById Int
+    createdById String
 }
 model SetGroup {
-    id               Int               @id
+    id               String            @id
     sets             Set[]
     routineRevisions RoutineRevision[]
     createdBy        User              @relation(fields: [createdById], references: [id])
-    createdById      Int
+    createdById      String
 }
 model RoutineRevision {
-    id          Int        @id
+    id          String     @id
     createdAt   DateTime   @default(now())
     routineBlob String
     setGroups   SetGroup[]
     routine     Routine?   @relation(fields: [routineId], references: [id])
-    routineId   Int?
+    routineId   String?
     createdBy   User       @relation(fields: [createdById], references: [id])
-    createdById Int
+    createdById String
 }
 model Routine {
-    id          Int               @id
+    id          String            @id
     createdAt   DateTime          @default(now())
     name        String
     description String
     color       String
     createdBy   User              @relation(fields: [createdById], references: [id])
-    createdById Int
+    createdById String
     revisions   RoutineRevision[]
 }
 model User {
-    id              Int               @id
+    id              String            @id
     username        String            @unique
     password        String
     routines        Routine[]
     exercises       Exercise[]
```


