generator client {
  provider = "prisma-client-js"
}

///
datasource db {
  provider = "postgresql"
  url = "***"
}

model Exercise {
  createdAt    DateTime       @default(now())
  createdById  String?
  description  String
  formatId     String
  id           String         @id
  name         String
  User         User?          @relation(fields: [createdById], references: [id])
  Format       Format         @relation(fields: [formatId], references: [id])
  Set          Set[]
  MuscleImpact MuscleImpact[]
}

model Format {
  createdAt   DateTime               @default(now())
  description String
  id          String                 @id
  name        String
  Exercise    Exercise[]
  measurables MeasurablesOnFormats[]
}

model Measurable {
  id      String                 @id
  name    String
  formats MeasurablesOnFormats[]
}

model MeasurablesOnFormats {
  format       Format     @relation(fields: [formatId], references: [id])
  formatId     String
  measurable   Measurable @relation(fields: [measurableId], references: [id])
  measurableId String
  @@id([formatId, measurableId])
}

model Muscle {
  createdAt    DateTime       @default(now())
  description  String
  id           String         @id
  name         String
  MuscleImpact MuscleImpact[]
}

model MuscleImpact {
  id           String     @id
  impactRating Int
  muscleId     String
  Muscle       Muscle     @relation(fields: [muscleId], references: [id])
  Exercise     Exercise[]
}

model Routine {
  color           String
  createdAt       DateTime          @default(now())
  createdById     String
  description     String
  id              String            @id
  name            String
  User            User              @relation(fields: [createdById], references: [id])
  RoutineRevision RoutineRevision[]
}

model RoutineRevision {
  createdAt   DateTime   @default(now())
  createdById String
  id          String     @id
  routineBlob String
  routineId   String?
  User        User       @relation(fields: [createdById], references: [id])
  Routine     Routine?   @relation(fields: [routineId], references: [id])
  SetGroup    SetGroup[]
}

model Set {
  createdById String
  exerciseId  String
  id          String     @id
  restSeconds Int
  User        User       @relation(fields: [createdById], references: [id])
  Exercise    Exercise   @relation(fields: [exerciseId], references: [id])
  SetGroup    SetGroup[]
}

model SetGroup {
  createdById     String
  id              String            @id
  User            User              @relation(fields: [createdById], references: [id])
  RoutineRevision RoutineRevision[]
  Set             Set[]
}

model User {
  id              String            @id
  password        String
  username        String            @unique
  Exercise        Exercise[]
  Routine         Routine[]
  RoutineRevision RoutineRevision[]
  Set             Set[]
  SetGroup        SetGroup[]
}
