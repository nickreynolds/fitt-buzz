# Migration `20200816130657-change-muscle-id`

This migration has been generated by Nick Reynolds at 8/16/2020, 1:06:57 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Measurable" (
"exerciseId" integer   ,"id" SERIAL,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."MuscleImpact" ADD COLUMN "exerciseId" integer   ;

ALTER TABLE "public"."_ExerciseToMuscleImpact" DROP CONSTRAINT IF EXiSTS "_ExerciseToMuscleImpact_A_fkey";

ALTER TABLE "public"."_ExerciseToMuscleImpact" DROP CONSTRAINT IF EXiSTS "_ExerciseToMuscleImpact_B_fkey";

ALTER TABLE "public"."Measurable" ADD FOREIGN KEY ("exerciseId")REFERENCES "public"."Exercise"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."MuscleImpact" ADD FOREIGN KEY ("exerciseId")REFERENCES "public"."Exercise"("id") ON DELETE SET NULL  ON UPDATE CASCADE

DROP TABLE "public"."_ExerciseToMuscleImpact";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200815202340-add-muscle-impacts..20200816130657-change-muscle-id
--- datamodel.dml
+++ datamodel.dml
@@ -1,8 +1,8 @@
 // 1
 datasource db {
     provider = "postgresql"
-    url = "***"
+    url = "***"
 }
 // 2
 generator client {
@@ -11,23 +11,31 @@
 // 3
 model Muscle {
-    id           Int            @id @default(autoincrement())
+    id           Int            @id
     createdAt    DateTime       @default(now())
     name         String
     description  String
     MuscleImpact MuscleImpact[]
 }
 model MuscleImpact {
-    id           Int        @id @default(autoincrement())
-    muscle       Muscle     @relation(fields: [muscleId], references: [id])
+    id           Int       @id @default(autoincrement())
+    muscle       Muscle    @relation(fields: [muscleId], references: [id])
     impactRating Int
     muscleId     Int
-    exercises    Exercise[]
+    Exercise     Exercise? @relation(fields: [exerciseId], references: [id])
+    exerciseId   Int?
 }
+model Measurable {
+    id         Int       @id @default(autoincrement())
+    name       String
+    Exercise   Exercise? @relation(fields: [exerciseId], references: [id])
+    exerciseId Int?
+}
+
 model Format {
     id          Int        @id @default(autoincrement())
     createdAt   DateTime   @default(now())
     name        String
@@ -45,8 +53,9 @@
     createdBy     User           @relation(fields: [createdById], references: [id])
     createdById   Int
     sets          Set[]
     formatId      Int
+    measurables   Measurable[]
 }
 model Set {
     id          Int        @id @default(autoincrement())
```


