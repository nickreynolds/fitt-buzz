# Migration `20200816202915-question-mark`

This migration has been generated by Nick Reynolds at 8/16/2020, 4:29:15 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Exercise" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"createdById" text   ,
"description" text  NOT NULL ,
"formatId" text  NOT NULL ,
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Format" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"description" text  NOT NULL ,
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Measurable" (
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."MeasurablesOnFormats" (
"formatId" text  NOT NULL ,
"measurableId" text  NOT NULL ,
PRIMARY KEY ("formatId","measurableId"))

CREATE TABLE "public"."Muscle" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"description" text  NOT NULL ,
"id" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."MuscleImpact" (
"id" text  NOT NULL ,
"impactRating" integer  NOT NULL ,
"muscleId" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."User" (
"id" text  NOT NULL ,
"password" text  NOT NULL ,
"username" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."_ExerciseToMuscleImpact" (
"A" text  NOT NULL ,
"B" text  NOT NULL )

CREATE UNIQUE INDEX "User.username_unique" ON "public"."User"("username")

CREATE UNIQUE INDEX "_ExerciseToMuscleImpact_AB_unique" ON "public"."_ExerciseToMuscleImpact"("A","B")

CREATE  INDEX "_ExerciseToMuscleImpact_B_index" ON "public"."_ExerciseToMuscleImpact"("B")

ALTER TABLE "public"."Exercise" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Exercise" ADD FOREIGN KEY ("formatId")REFERENCES "public"."Format"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."MeasurablesOnFormats" ADD FOREIGN KEY ("formatId")REFERENCES "public"."Format"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."MeasurablesOnFormats" ADD FOREIGN KEY ("measurableId")REFERENCES "public"."Measurable"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."MuscleImpact" ADD FOREIGN KEY ("muscleId")REFERENCES "public"."Muscle"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ExerciseToMuscleImpact" ADD FOREIGN KEY ("A")REFERENCES "public"."Exercise"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_ExerciseToMuscleImpact" ADD FOREIGN KEY ("B")REFERENCES "public"."MuscleImpact"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200816202653-who-knows..20200816202915-question-mark
--- datamodel.dml
+++ datamodel.dml
@@ -4,30 +4,29 @@
 ///
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Exercise {
-  createdAt    DateTime       @default(now())
-  createdById  String?
-  description  String
-  formatId     String
-  id           String         @id
-  name         String
-  User         User?          @relation(fields: [createdById], references: [id])
-  Format       Format         @relation(fields: [formatId], references: [id])
-  Set          Set[]
-  MuscleImpact MuscleImpact[]
+  createdAt     DateTime       @default(now())
+  createdById   String?
+  description   String
+  formatId      String
+  id            String         @id
+  name          String
+  User          User?          @relation(fields: [createdById], references: [id])
+  format        Format         @relation(fields: [formatId], references: [id])
+  muscleImpacts MuscleImpact[]
 }
 model Format {
   createdAt   DateTime               @default(now())
   description String
   id          String                 @id
   name        String
-  Exercise    Exercise[]
+  exercises   Exercise[]
   measurables MeasurablesOnFormats[]
 }
 model Measurable {
@@ -44,69 +43,25 @@
   @@id([formatId, measurableId])
 }
 model Muscle {
-  createdAt    DateTime       @default(now())
-  description  String
-  id           String         @id
-  name         String
-  MuscleImpact MuscleImpact[]
+  createdAt     DateTime       @default(now())
+  description   String
+  id            String         @id
+  name          String
+  muscleImpacts MuscleImpact[]
 }
 model MuscleImpact {
   id           String     @id
   impactRating Int
   muscleId     String
-  Muscle       Muscle     @relation(fields: [muscleId], references: [id])
-  Exercise     Exercise[]
+  muscle       Muscle     @relation(fields: [muscleId], references: [id])
+  exercises    Exercise[]
 }
-model Routine {
-  color           String
-  createdAt       DateTime          @default(now())
-  createdById     String
-  description     String
-  id              String            @id
-  name            String
-  User            User              @relation(fields: [createdById], references: [id])
-  RoutineRevision RoutineRevision[]
-}
-
-model RoutineRevision {
-  createdAt   DateTime   @default(now())
-  createdById String
-  id          String     @id
-  routineBlob String
-  routineId   String?
-  User        User       @relation(fields: [createdById], references: [id])
-  Routine     Routine?   @relation(fields: [routineId], references: [id])
-  SetGroup    SetGroup[]
-}
-
-model Set {
-  createdById String
-  exerciseId  String
-  id          String     @id
-  restSeconds Int
-  User        User       @relation(fields: [createdById], references: [id])
-  Exercise    Exercise   @relation(fields: [exerciseId], references: [id])
-  SetGroup    SetGroup[]
-}
-
-model SetGroup {
-  createdById     String
-  id              String            @id
-  User            User              @relation(fields: [createdById], references: [id])
-  RoutineRevision RoutineRevision[]
-  Set             Set[]
-}
-
 model User {
-  id              String            @id
-  password        String
-  username        String            @unique
-  Exercise        Exercise[]
-  Routine         Routine[]
-  RoutineRevision RoutineRevision[]
-  Set             Set[]
-  SetGroup        SetGroup[]
+  id       String     @id
+  password String
+  username String     @unique
+  Exercise Exercise[]
 }
```


