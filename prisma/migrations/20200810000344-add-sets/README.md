# Migration `20200810000344-add-sets`

This migration has been generated by Nick Reynolds at 8/10/2020, 12:03:44 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Set" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"exerciseId" integer  NOT NULL ,"id" SERIAL,"repetitions" integer  NOT NULL ,"restSeconds" integer  NOT NULL ,"routineId" integer   ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Set" ADD FOREIGN KEY ("exerciseId")REFERENCES "public"."Exercise"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Set" ADD FOREIGN KEY ("routineId")REFERENCES "public"."Routine"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200809231417-add-names..20200810000344-add-sets
--- datamodel.dml
+++ datamodel.dml
@@ -1,34 +1,48 @@
 // 1
 datasource db {
     provider = "postgresql"
-    url = "***"
+    url = "***"
 }
 // 2
 generator client {
     provider = "prisma-client-js"
 }
 // 3
-model Routine {
+
+model Exercise {
     id          Int      @id @default(autoincrement())
     createdAt   DateTime @default(now())
     name        String
     description String
-    color       String
+    format      String
     postedBy    User?    @relation(fields: [postedById], references: [id])
     postedById  Int?
+    Set         Set[]
 }
-model Exercise {
+model Set {
     id          Int      @id @default(autoincrement())
     createdAt   DateTime @default(now())
+    exercise    Exercise @relation(fields: [exerciseId], references: [id])
+    repetitions Int
+    restSeconds Int
+    exerciseId  Int
+    Routine     Routine? @relation(fields: [routineId], references: [id])
+    routineId   Int?
+}
+
+model Routine {
+    id          Int      @id @default(autoincrement())
+    createdAt   DateTime @default(now())
     name        String
     description String
-    format      String
+    color       String
     postedBy    User?    @relation(fields: [postedById], references: [id])
     postedById  Int?
+    sets        Set[]
 }
 model User {
     id        Int        @id @default(autoincrement())
```


